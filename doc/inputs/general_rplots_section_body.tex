
PsN can automatically generate R plots to visualize results, if a template file is available. The PsN installation package includes default template files for some tools, found in the R-scripts subdirectory of the installation directory, but R plots can be generated also for the other tools if the user provides the template file. Most of the default templates are quite basic, but 
the user can easily modify or replace them.

PsN will create a preamble with some run specific information, such as the name of the raw\_results file, the parameter labels and the name of the tool results file. Please note that R plots generation might fail if there are special characters, such as $\mu$, in the parameter labels. Some tools, for example vpc and randtest, also add tool-specific information to the preamble. Then the template file is appended. If the template file contains an old preamble, then that preamble will be replaced with the new one. This means the user can modify an old PsN-generated R-script and then use this script as a new template, without having to remove the preamble. When a template file is available for the tool and option \mbox{-rplots} is 0 or positive, the R-script will be generated and saved in the main run directory. 

If R is configured in psn.conf or command 'R' is available and option -rplots is positive the script will also be run and a number of pdf-format plots be created.

\rplotsconditions

\begin{optionlist}
\optname{debug\_rmd}
Turn on to have rplots retain the .tex file for debugging.
\nextopt
    \optname{html}
        Render to html. This option makes rplots not dependent on LaTeX being available.
        Can be combined with -pdf
    \nextopt
    \optname{pdf}
        Render to pdf. This is the default. Can be combined with -html
    \nextopt
\optdefault{rplots}{level}
-rplots<0 means R-script is not generated\\ 
-rplots=0 (default) means R-script is generated but not run\\ 
-rplots=1 means basic R plots are generated\\													  
-rplots=2 means basic and extended R plots are generated, if extended R plots are implemented\\													  
\nextopt
\optdefault{subset\_variable\_rplots}{variable name}
Default not set. The user can specify a subset variable to be used with the -rplots feature. This variable will, if set, be set as subset.variable in the preamble, and can then be used in the plot code. The only default template that uses this variable is the execute template, but as mentioned before the user can create new templates in which this variable can be useful.
\nextopt
\optdefault{subset\_variable\_rplots}{variable name}
Default not set. The user can specify a subset variable to be used with the -rplots feature. This variable will, if set, be set as subset.variable in the preamble, and can then be used in the plot code.  The only default template that uses this variable is the execute template, but as mentioned before the user can create new templates in which this variable can be useful.
\nextopt
\optdefault{template\_file\_rplots}{file}
When the R plots feature is used, the default template file PsN will look for is \guidetoolname\_default.R. The user can choose a different template file by setting option -template\_file\_rplots to a different file name. PsN will look for the file in the 'template\_directory\_rplots' directory, see the help text for that option.
\nextopt
\optdefault{template\_directory\_rplots}{path}
PsN can look for the rplots template file in a number of places. PsN looks in the following places in the order they are listed:
\begin{enumerate}
\item template\_directory\_rplots from the command line, if set 
\item calling directory (where PsN run is started from)
\item template\_directory\_rplots set in psn.conf 
\item R-scripts subdirectory of the PsN installation directory
\end{enumerate}
\nextopt

\end{optionlist}

\subsubsection*{Troubleshooting}
If no pdf was generated even if a template file is available and the appropriate options were set, check the .Rout-file in the main run directory for error messages.
